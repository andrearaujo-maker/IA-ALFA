<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel Wingo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0a0a23;
      color: white;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #00ffcc;
    }
    .card {
      background: #1c1c3a;
      border-radius: 12px;
      padding: 15px;
      margin: 10px auto;
      width: 90%;
      max-width: 600px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border-bottom: 1px solid #333;
      padding: 8px;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¯ Painel Wingo</h1>
  <div class="card">
    <p><b>PrÃ³ximo PerÃ­odo:</b> <span id="periodo">--</span></p>
    <p><b>Sinal Previsto:</b> <span id="sinal">--</span></p>
  </div>

  <div class="card">
    <h3>HistÃ³rico de Sinais (Recente â†’ Antigo)</h3>
    <table id="tabela">
      <thead>
        <tr><th>PerÃ­odo</th><th>NÃºmero</th><th>Cor</th><th>Resultado</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    async function atualizar() {
      const resp = await fetch("/dados");
      const data = await resp.json();

      document.getElementById("periodo").innerText = data.proximo_periodo || "--";
      document.getElementById("sinal").innerText = data.sinal_atual || "--";

      const tbody = document.querySelector("#tabela tbody");
      tbody.innerHTML = "";

      data.historico.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = <td>${item.periodo}</td><td>${item.numero}</td><td>${item.cor}</td><td>${item.resultado}</td>;
        tbody.appendChild(tr);
      });
    }

    atualizar();
    setInterval(atualizar, 5000);
  </script>
</body>
</html>
